<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 580" font-family="'Courier New', monospace">
  <defs>
    <linearGradient id="bg3" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <filter id="sh3" x="-3%" y="-3%" width="108%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>

  <rect width="1000" height="580" fill="url(#bg3)" rx="12"/>

  <!-- Title -->
  <text x="500" y="32" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="700" font-family="'Segoe UI', sans-serif">Before &amp; After: LLM SQL Modernization</text>

  <!-- BEFORE panel -->
  <rect x="20" y="50" width="470" height="510" rx="10" fill="#1a1a2e" stroke="#ef4444" stroke-width="1.5" filter="url(#sh3)"/>
  <!-- Tab bar -->
  <rect x="20" y="50" width="470" height="30" rx="10" fill="#2d1b1b"/>
  <rect x="20" y="70" width="470" height="10" fill="#2d1b1b"/>
  <circle cx="40" cy="65" r="5" fill="#ef4444"/>
  <circle cx="58" cy="65" r="5" fill="#f59e0b"/>
  <circle cx="76" cy="65" r="5" fill="#22c55e"/>
  <text x="255" y="69" text-anchor="middle" fill="#fca5a5" font-size="11" font-family="'Segoe UI', sans-serif" font-weight="600">❌  BEFORE — Legacy Query</text>

  <text x="35" y="102" fill="#ef4444" font-size="9">-- No comments, no context</text>
  <text x="35" y="118" fill="#ef4444" font-size="9">-- Single-letter aliases</text>
  <text x="35" y="134" fill="#ef4444" font-size="9">-- SELECT * everywhere</text>
  <text x="35" y="158" fill="#7dd3fc" font-size="9.5">SELECT</text><text x="82" y="158" fill="#e2e8f0" font-size="9.5"> *</text>
  <text x="35" y="174" fill="#7dd3fc" font-size="9.5">FROM</text><text x="67" y="174" fill="#fbbf24" font-size="9.5"> db.schema.customers</text><text x="238" y="174" fill="#e2e8f0" font-size="9.5"> a</text>
  <text x="35" y="190" fill="#7dd3fc" font-size="9.5">JOIN</text><text x="67" y="190" fill="#fbbf24" font-size="9.5"> db.schema.accounts</text><text x="230" y="190" fill="#e2e8f0" font-size="9.5"> b</text>
  <text x="51" y="206" fill="#7dd3fc" font-size="9.5">ON</text><text x="67" y="206" fill="#e2e8f0" font-size="9.5"> a.id = b.cust_id</text>
  <text x="35" y="222" fill="#7dd3fc" font-size="9.5">JOIN</text><text x="67" y="222" fill="#e2e8f0" font-size="9.5"> (</text>
  <text x="51" y="238" fill="#7dd3fc" font-size="9.5">SELECT</text><text x="98" y="238" fill="#e2e8f0" font-size="9.5"> *</text>
  <text x="51" y="254" fill="#7dd3fc" font-size="9.5">FROM</text><text x="82" y="254" fill="#fbbf24" font-size="9.5"> db.schema.transactions</text>
  <text x="51" y="270" fill="#7dd3fc" font-size="9.5">WHERE</text><text x="90" y="270" fill="#e2e8f0" font-size="9.5"> del_flg &lt;&gt; </text><text x="178" y="270" fill="#a5f3fc" font-size="9.5">'Y'</text>
  <text x="51" y="286" fill="#7dd3fc" font-size="9.5">QUALIFY</text><text x="103" y="286" fill="#c084fc" font-size="9.5"> RANK</text><text x="140" y="286" fill="#e2e8f0" font-size="9.5">() OVER (</text>
  <text x="67" y="302" fill="#7dd3fc" font-size="9.5">PARTITION BY</text><text x="160" y="302" fill="#e2e8f0" font-size="9.5"> acct_id</text>
  <text x="67" y="318" fill="#7dd3fc" font-size="9.5">ORDER BY</text><text x="140" y="318" fill="#e2e8f0" font-size="9.5"> proc_dt </text><text x="200" y="318" fill="#7dd3fc" font-size="9.5">DESC</text><text x="232" y="318" fill="#e2e8f0" font-size="9.5">) = 1</text>
  <text x="35" y="334" fill="#e2e8f0" font-size="9.5">) c</text><text x="55" y="334" fill="#7dd3fc" font-size="9.5"> ON</text><text x="75" y="334" fill="#e2e8f0" font-size="9.5"> b.acct_id = c.acct_id</text>
  <text x="35" y="350" fill="#7dd3fc" font-size="9.5">LEFT JOIN</text><text x="110" y="350" fill="#e2e8f0" font-size="9.5"> (</text>
  <text x="51" y="366" fill="#7dd3fc" font-size="9.5">SELECT</text><text x="98" y="366" fill="#e2e8f0" font-size="9.5"> * </text><text x="112" y="366" fill="#7dd3fc" font-size="9.5">FROM</text><text x="143" y="366" fill="#fbbf24" font-size="9.5"> db.schema.cases</text>
  <text x="51" y="382" fill="#7dd3fc" font-size="9.5">WHERE</text><text x="90" y="382" fill="#e2e8f0" font-size="9.5"> type = </text><text x="138" y="382" fill="#a5f3fc" font-size="9.5">'Escalation'</text>
  <text x="51" y="398" fill="#7dd3fc" font-size="9.5">AND</text><text x="80" y="398" fill="#e2e8f0" font-size="9.5"> org_key </text><text x="140" y="398" fill="#7dd3fc" font-size="9.5">IS NOT NULL</text>
  <text x="51" y="414" fill="#7dd3fc" font-size="9.5">QUALIFY</text><text x="103" y="414" fill="#c084fc" font-size="9.5"> RANK</text><text x="140" y="414" fill="#e2e8f0" font-size="9.5">() OVER (...</text>
  <text x="35" y="430" fill="#e2e8f0" font-size="9.5">) d</text><text x="55" y="430" fill="#7dd3fc" font-size="9.5"> ON</text><text x="75" y="430" fill="#e2e8f0" font-size="9.5"> a.cif_id = d.org_key</text>
  <text x="35" y="446" fill="#7dd3fc" font-size="9.5">WHERE</text><text x="82" y="446" fill="#e2e8f0" font-size="9.5"> d.start_dt &lt; c.end_dt</text>
  <text x="35" y="462" fill="#7dd3fc" font-size="9.5">ORDER BY</text><text x="110" y="462" fill="#e2e8f0" font-size="9.5"> a.open_dt </text><text x="195" y="462" fill="#7dd3fc" font-size="9.5">DESC</text>

  <!-- Issues callout -->
  <rect x="35" y="480" width="440" height="65" rx="6" fill="#3b0f0f" stroke="#7f1d1d" stroke-width="1"/>
  <text x="50" y="498" fill="#fca5a5" font-size="9" font-family="'Segoe UI', sans-serif" font-weight="600">Issues found:</text>
  <text x="50" y="514" fill="#f87171" font-size="8.5" font-family="'Segoe UI', sans-serif">• Single-letter aliases (a, b, c, d) — unreadable at scale</text>
  <text x="50" y="528" fill="#f87171" font-size="8.5" font-family="'Segoe UI', sans-serif">• SELECT * pulls unnecessary columns — performance drag</text>
  <text x="50" y="542" fill="#f87171" font-size="8.5" font-family="'Segoe UI', sans-serif">• Nested subqueries instead of CTEs — hard to maintain</text>


  <!-- AFTER panel -->
  <rect x="510" y="50" width="470" height="510" rx="10" fill="#0a1a2e" stroke="#22c55e" stroke-width="1.5" filter="url(#sh3)"/>
  <rect x="510" y="50" width="470" height="30" rx="10" fill="#0b2d1b"/>
  <rect x="510" y="70" width="470" height="10" fill="#0b2d1b"/>
  <circle cx="530" cy="65" r="5" fill="#ef4444"/>
  <circle cx="548" cy="65" r="5" fill="#f59e0b"/>
  <circle cx="566" cy="65" r="5" fill="#22c55e"/>
  <text x="745" y="69" text-anchor="middle" fill="#86efac" font-size="11" font-family="'Segoe UI', sans-serif" font-weight="600">✅  AFTER — LLM-Modernized Query</text>

  <text x="525" y="102" fill="#22c55e" font-size="9">-- Customer account report with case overlay</text>
  <text x="525" y="118" fill="#22c55e" font-size="9">-- Descriptive CTEs, qualified columns</text>
  <text x="525" y="138" fill="#7dd3fc" font-size="9.5">WITH</text><text x="555" y="138" fill="#fbbf24" font-size="9.5"> Transactions</text><text x="645" y="138" fill="#7dd3fc" font-size="9.5"> AS</text><text x="665" y="138" fill="#e2e8f0" font-size="9.5"> (</text>
  <text x="541" y="154" fill="#7dd3fc" font-size="9.5">SELECT</text>
  <text x="557" y="170" fill="#e2e8f0" font-size="9.5">Transactions.acct_id,</text>
  <text x="557" y="186" fill="#e2e8f0" font-size="9.5">Transactions.txn_status</text>
  <text x="541" y="202" fill="#7dd3fc" font-size="9.5">FROM</text><text x="572" y="202" fill="#fbbf24" font-size="9.5"> db.schema.transactions</text>
  <text x="557" y="218" fill="#7dd3fc" font-size="9.5">AS</text><text x="575" y="218" fill="#e2e8f0" font-size="9.5"> Transactions</text>
  <text x="541" y="234" fill="#7dd3fc" font-size="9.5">WHERE</text><text x="580" y="234" fill="#e2e8f0" font-size="9.5"> Transactions.del_flg &lt;&gt; </text><text x="765" y="234" fill="#a5f3fc" font-size="9.5">'Y'</text>
  <text x="541" y="250" fill="#7dd3fc" font-size="9.5">QUALIFY</text><text x="593" y="250" fill="#c084fc" font-size="9.5"> RANK</text><text x="630" y="250" fill="#e2e8f0" font-size="9.5">() OVER (</text>
  <text x="557" y="266" fill="#7dd3fc" font-size="9.5">PARTITION BY</text><text x="653" y="266" fill="#e2e8f0" font-size="9.5"> Transactions.acct_id</text>
  <text x="557" y="282" fill="#7dd3fc" font-size="9.5">ORDER BY</text><text x="630" y="282" fill="#e2e8f0" font-size="9.5"> Transactions.proc_dt</text>
  <text x="573" y="298" fill="#7dd3fc" font-size="9.5">DESC</text><text x="605" y="298" fill="#e2e8f0" font-size="9.5">) = 1</text>
  <text x="525" y="314" fill="#e2e8f0" font-size="9.5">),</text>

  <text x="525" y="334" fill="#fbbf24" font-size="9.5">Cases</text><text x="555" y="334" fill="#7dd3fc" font-size="9.5"> AS</text><text x="575" y="334" fill="#e2e8f0" font-size="9.5"> (</text>
  <text x="541" y="350" fill="#7dd3fc" font-size="9.5">SELECT</text><text x="588" y="350" fill="#e2e8f0" font-size="9.5"> Cases.case_id, Cases.org_key,</text>
  <text x="557" y="366" fill="#e2e8f0" font-size="9.5">Cases.start_dt, Cases.status</text>
  <text x="541" y="382" fill="#7dd3fc" font-size="9.5">FROM</text><text x="573" y="382" fill="#fbbf24" font-size="9.5"> db.schema.cases</text><text x="690" y="382" fill="#7dd3fc" font-size="9.5"> AS</text><text x="710" y="382" fill="#e2e8f0" font-size="9.5"> Cases</text>
  <text x="541" y="398" fill="#7dd3fc" font-size="9.5">WHERE</text><text x="580" y="398" fill="#e2e8f0" font-size="9.5"> Cases.type = </text><text x="673" y="398" fill="#a5f3fc" font-size="9.5">'Escalation'</text>
  <text x="557" y="414" fill="#7dd3fc" font-size="9.5">AND</text><text x="585" y="414" fill="#e2e8f0" font-size="9.5"> Cases.org_key </text><text x="680" y="414" fill="#7dd3fc" font-size="9.5">IS NOT NULL</text>
  <text x="541" y="430" fill="#7dd3fc" font-size="9.5">QUALIFY</text><text x="593" y="430" fill="#e2e8f0" font-size="9.5"> ...</text>
  <text x="525" y="446" fill="#e2e8f0" font-size="9.5">)</text>

  <text x="525" y="466" fill="#22c55e" font-size="9">-- Clean JOINs with descriptive aliases</text>
  <text x="525" y="482" fill="#7dd3fc" font-size="9.5">SELECT</text><text x="572" y="482" fill="#e2e8f0" font-size="9.5"> Customers.cust_id, ...</text>
  <text x="525" y="498" fill="#7dd3fc" font-size="9.5">FROM</text><text x="557" y="498" fill="#e2e8f0" font-size="9.5"> Customers</text>
  <text x="525" y="514" fill="#7dd3fc" font-size="9.5">INNER JOIN</text><text x="607" y="514" fill="#e2e8f0" font-size="9.5"> Transactions ON ...</text>
  <text x="525" y="530" fill="#7dd3fc" font-size="9.5">LEFT JOIN</text><text x="600" y="530" fill="#e2e8f0" font-size="9.5"> Cases ON ...</text>
  <text x="525" y="546" fill="#7dd3fc" font-size="9.5">ORDER BY</text><text x="600" y="546" fill="#e2e8f0" font-size="9.5"> Customers.open_dt </text><text x="745" y="546" fill="#7dd3fc" font-size="9.5">DESC</text>

  <!-- Arrow between panels -->
  <polygon points="492,290 508,280 508,300" fill="#f59e0b"/>
  <text x="500" y="315" text-anchor="middle" fill="#fbbf24" font-size="22" font-family="'Segoe UI', sans-serif">⚡</text>
  <text x="500" y="338" text-anchor="middle" fill="#fbbf24" font-size="9" font-family="'Segoe UI', sans-serif" font-weight="600">LLM</text>
</svg>
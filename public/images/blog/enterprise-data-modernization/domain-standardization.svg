<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 460" font-family="'Segoe UI', system-ui, sans-serif">
  <defs>
    <filter id="ds4" x="-3%" y="-3%" width="106%" height="110%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#1F4E79" flood-opacity="0.1"/>
    </filter>
    <linearGradient id="hg5" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#1F4E79"/>
      <stop offset="100%" stop-color="#2A7F62"/>
    </linearGradient>
    <marker id="a5" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#1F4E79"/>
    </marker>
    <marker id="a5t" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#2A7F62"/>
    </marker>
  </defs>

  <rect width="900" height="460" fill="#f9fafb" rx="12"/>
  <rect x="0" y="0" width="900" height="50" fill="url(#hg5)" rx="12"/>
  <rect x="0" y="25" width="900" height="25" fill="url(#hg5)"/>
  <text x="450" y="33" text-anchor="middle" fill="#ffffff" font-size="17" font-weight="700">Domain Standardization â€” Validation &amp; Transformation Pipeline</text>

  <!-- Input sources on left -->
  <text x="85" y="82" text-anchor="middle" fill="#1F4E79" font-size="12" font-weight="700">Input Sources</text>

  <g filter="url(#ds4)">
    <rect x="25" y="94" width="120" height="42" rx="6" fill="#e8f4f8" stroke="#1F4E79" stroke-width="1.5"/>
    <text x="85" y="120" text-anchor="middle" fill="#1F4E79" font-size="10" font-weight="600">SDW Tables</text>
  </g>
  <g filter="url(#ds4)">
    <rect x="25" y="146" width="120" height="42" rx="6" fill="#e8f4f8" stroke="#1F4E79" stroke-width="1.5"/>
    <text x="85" y="172" text-anchor="middle" fill="#1F4E79" font-size="10" font-weight="600">Aggregates</text>
  </g>
  <g filter="url(#ds4)">
    <rect x="25" y="198" width="120" height="42" rx="6" fill="#e8f4f8" stroke="#1F4E79" stroke-width="1.5"/>
    <text x="85" y="224" text-anchor="middle" fill="#1F4E79" font-size="10" font-weight="600">Interim Domains</text>
  </g>

  <!-- Arrows to Source Qualifier -->
  <line x1="145" y1="115" x2="185" y2="170" stroke="#1F4E79" stroke-width="1.2" marker-end="url(#a5)"/>
  <line x1="145" y1="167" x2="185" y2="170" stroke="#1F4E79" stroke-width="1.2" marker-end="url(#a5)"/>
  <line x1="145" y1="219" x2="185" y2="175" stroke="#1F4E79" stroke-width="1.2" marker-end="url(#a5)"/>

  <!-- STEP 1: Source Qualifier -->
  <g filter="url(#ds4)">
    <rect x="190" y="130" width="130" height="90" rx="8" fill="#ffffff" stroke="#1F4E79" stroke-width="2"/>
    <rect x="190" y="130" width="130" height="30" rx="8" fill="#1F4E79"/>
    <rect x="190" y="145" width="130" height="15" fill="#1F4E79"/>
  </g>
  <circle cx="208" cy="145" r="10" fill="#ffffff" opacity="0.2"/>
  <text x="208" y="149" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="700">1</text>
  <text x="270" y="150" text-anchor="middle" fill="#ffffff" font-size="10.5" font-weight="600">Source Qualifier</text>
  <text x="255" y="178" text-anchor="middle" fill="#2C3E50" font-size="9">
    <tspan x="255" dy="0">Assembles &amp; joins</tspan>
    <tspan x="255" dy="13">all input structures</tspan>
  </text>

  <!-- Arrow -->
  <line x1="320" y1="175" x2="350" y2="175" stroke="#1F4E79" stroke-width="1.5" marker-end="url(#a5)"/>

  <!-- STEP 2: Content Validation -->
  <g filter="url(#ds4)">
    <rect x="355" y="100" width="140" height="150" rx="8" fill="#ffffff" stroke="#2A7F62" stroke-width="2"/>
    <rect x="355" y="100" width="140" height="30" rx="8" fill="#2A7F62"/>
    <rect x="355" y="115" width="140" height="15" fill="#2A7F62"/>
  </g>
  <circle cx="373" cy="115" r="10" fill="#ffffff" opacity="0.2"/>
  <text x="373" y="119" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="700">2</text>
  <text x="440" y="120" text-anchor="middle" fill="#ffffff" font-size="10.5" font-weight="600">Validation Engine</text>

  <!-- Validation sub-items -->
  <rect x="367" y="140" width="116" height="22" rx="3" fill="#e6f5f0" stroke="#2A7F62" stroke-width="0.8"/>
  <text x="425" y="155" text-anchor="middle" fill="#2C3E50" font-size="8.5">Content Validation</text>
  <rect x="367" y="166" width="116" height="22" rx="3" fill="#e6f5f0" stroke="#2A7F62" stroke-width="0.8"/>
  <text x="425" y="181" text-anchor="middle" fill="#2C3E50" font-size="8.5">Referential Integrity</text>
  <rect x="367" y="192" width="116" height="22" rx="3" fill="#e6f5f0" stroke="#2A7F62" stroke-width="0.8"/>
  <text x="425" y="207" text-anchor="middle" fill="#2C3E50" font-size="8.5">Primary Key Check</text>
  <rect x="367" y="218" width="116" height="22" rx="3" fill="#e6f5f0" stroke="#2A7F62" stroke-width="0.8"/>
  <text x="425" y="233" text-anchor="middle" fill="#2C3E50" font-size="8.5">Threshold Check</text>

  <!-- Arrow -->
  <line x1="495" y1="175" x2="525" y2="175" stroke="#2A7F62" stroke-width="1.5" marker-end="url(#a5t)"/>

  <!-- STEP 3: Transformation (BRE) -->
  <g filter="url(#ds4)">
    <rect x="530" y="110" width="140" height="130" rx="8" fill="#ffffff" stroke="#d4a017" stroke-width="2"/>
    <rect x="530" y="110" width="140" height="30" rx="8" fill="#d4a017"/>
    <rect x="530" y="125" width="140" height="15" fill="#d4a017"/>
  </g>
  <circle cx="548" cy="125" r="10" fill="#ffffff" opacity="0.2"/>
  <text x="548" y="129" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="700">3</text>
  <text x="615" y="130" text-anchor="middle" fill="#ffffff" font-size="10.5" font-weight="600">Transformation</text>

  <rect x="542" y="150" width="116" height="20" rx="3" fill="#fef9e7" stroke="#d4a017" stroke-width="0.8"/>
  <text x="600" y="164" text-anchor="middle" fill="#2C3E50" font-size="8.5">Straight Mapping</text>
  <rect x="542" y="174" width="116" height="20" rx="3" fill="#fef9e7" stroke="#d4a017" stroke-width="0.8"/>
  <text x="600" y="188" text-anchor="middle" fill="#2C3E50" font-size="8.5">Code Mapping</text>
  <rect x="542" y="198" width="116" height="20" rx="3" fill="#fef9e7" stroke="#d4a017" stroke-width="0.8"/>
  <text x="600" y="212" text-anchor="middle" fill="#2C3E50" font-size="8.5">Conditional Logic</text>
  <rect x="542" y="222" width="116" height="12" rx="3" fill="#fef9e7" stroke="#d4a017" stroke-width="0.8"/>
  <text x="600" y="232" text-anchor="middle" fill="#2C3E50" font-size="7.5">Math / Custom Rules</text>

  <!-- Arrow -->
  <line x1="670" y1="175" x2="705" y2="175" stroke="#d4a017" stroke-width="1.5" marker-end="url(#a5)"/>

  <!-- STEP 4: Output -->
  <g filter="url(#ds4)">
    <rect x="710" y="135" width="160" height="80" rx="8" fill="#1F4E79"/>
  </g>
  <circle cx="730" cy="160" r="10" fill="#ffffff" opacity="0.2"/>
  <text x="730" y="164" text-anchor="middle" fill="#1F4E79" font-size="11" font-weight="700">4</text>
  <text x="800" y="165" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="700">Domain</text>
  <text x="800" y="183" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="700">Integrated Structure</text>
  <text x="790" y="200" text-anchor="middle" fill="#d1e3f3" font-size="9">âœ“ Validated &amp; Elemental</text>

  <!-- Message Log (branching down from validation) -->
  <line x1="425" y1="250" x2="425" y2="285" stroke="#c0392b" stroke-width="1.2" stroke-dasharray="3,3"/>
  <g filter="url(#ds4)">
    <rect x="340" y="290" width="170" height="65" rx="8" fill="#fff5f5" stroke="#c0392b" stroke-width="1.5"/>
    <text x="425" y="315" text-anchor="middle" fill="#c0392b" font-size="11" font-weight="600">ðŸ“‹ Message Log</text>
    <text x="425" y="335" text-anchor="middle" fill="#64748b" font-size="9">Centralized quality audit trail</text>
    <text x="425" y="348" text-anchor="middle" fill="#64748b" font-size="9">per attribute, per row</text>
  </g>

  <!-- Bottom section: Metadata-driven callout -->
  <rect x="25" y="385" width="850" height="55" rx="8" fill="#1F4E79" opacity="0.06" stroke="#1F4E79" stroke-width="1" stroke-dasharray="4,3"/>
  <text x="450" y="410" text-anchor="middle" fill="#1F4E79" font-size="12" font-weight="700">ðŸ’¡ Metadata-Driven: All validation rules, applicability conditions, and transformations</text>
  <text x="450" y="428" text-anchor="middle" fill="#64748b" font-size="10.5">are generated from curated metadata â€” ensuring consistency, reproducibility, and automated quality governance.</text>
</svg>
